<!doctype html><html lang=ko><head><title>TypeScript 50 Lessons Part 5 :: FaultNote</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="스매싱매거진의 타입스크립트 50 레슨 정리 5편"><meta name=keywords content="typescript,Stefan Baumgartner"><meta name=robots content="noodp"><link rel=canonical href=https://faultnote.github.io/posts/typescript-50-lessons-5/><script async src="https://www.googletagmanager.com/gtag/js?id=G-6J40Z181KC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6J40Z181KC")}</script><link rel=stylesheet href=https://faultnote.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://faultnote.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://faultnote.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://faultnote.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://faultnote.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://faultnote.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://faultnote.github.io/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://faultnote.github.io/css/menu.min.6a067853fcfe9d726ce02f96db38608eb850d4cb16a27d1395b74c23205aff9e.css><link rel=stylesheet href=https://faultnote.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://faultnote.github.io/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://faultnote.github.io/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://faultnote.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://faultnote.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel="shortcut icon" href=https://faultnote.github.io/favicon.png><link rel=apple-touch-icon href=https://faultnote.github.io/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="og:title" content="TypeScript 50 Lessons Part 5"><meta property="og:description" content="스매싱매거진의 타입스크립트 50 레슨 정리 5편"><meta property="og:url" content="https://faultnote.github.io/posts/typescript-50-lessons-5/"><meta property="og:site_name" content="FaultNote"><meta property="og:image" content="https://faultnote.github.io/posts/images/cover-typescript-50-lessons.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2022-07-23 15:00:00 +0900 +0900"></head><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>FaultNote</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/about>소개</a></li><li><a href=/series>연재</a></li><li><a href=/blog>블로그</a></li><hr><li><a href=https://faultnote.github.io/>한국어</a></li><li><a href=https://faultnote.github.io/en/>English</a></li></ul></li></ul><ul class="menu menu--desktop menu--language-selector"><li class=menu__trigger>한국어&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://faultnote.github.io/>한국어</a></li><li><a href=https://faultnote.github.io/en/>English</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>소개</a></li><li><a href=/series>연재</a></li><li><a href=/blog>블로그</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://faultnote.github.io/posts/typescript-50-lessons-5/>TypeScript 50 Lessons Part 5</a></h1><div class=post-meta><time class=post-date>2022-07-23</time><span class=post-author>soomtong</span><span class=post-reading-time>5 min read (2472 words)</span></div><span class=post-tags>#<a href=https://faultnote.github.io/tags/typescript/>typescript</a>&nbsp;
#<a href=https://faultnote.github.io/tags/javascript/>javascript</a>&nbsp;
</span><img src=https://faultnote.github.io/posts/images/cover-typescript-50-lessons.png class=post-cover alt="TypeScript 50 Lessons Part 5" title="Cover Image"><div class=post-content><div><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>타입스크립트 in 50 레슨</h2><div id=outline-text-headline-1 class=outline-text-2><p><a href=https://fettblog.eu/>스테판 바움가트너</a>가 스매싱 매거진에서 출판한 서적으로 타입스크립트 주요 주제들에 대해 잘 짚어주고 있다.</p><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Lesson 29</h3><div id=outline-text-headline-2 class=outline-text-3><pre class=example>
내가 원하는 게 뭔지 모르지만 어떻게 얻을지 알고 있다.
</pre><p>비디오 스트리밍 플랫폼 예제를 통해 제너릭 타입을 살펴보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>VideoFormatURLs</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>format360p</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>format480p</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>format720p</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>format1080p</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>SubtitleURLs</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>english</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>german</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>french</span>: <span style=color:#66d9ef>URL</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>그리고 이를 사용하기 위한 함수들과 유틸리티를 준비한다. 추가로 자막에 대한 타입도 준비했다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isFormatVailable</span>(<span style=color:#a6e22e>obj</span>: <span style=color:#66d9ef>VideoFormatURLs</span>, <span style=color:#a6e22e>key</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>obj</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isSubtitleAvailable</span>(<span style=color:#a6e22e>obj</span>: <span style=color:#66d9ef>SubtitleURLs</span>, <span style=color:#a6e22e>key</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>SubtitleURLs</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>obj</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// generalized
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isAvailable</span>(<span style=color:#a6e22e>obj</span>, <span style=color:#a6e22e>key</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>obj</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>작성하고 보니 비디오 포맷에 대한 점검 함수와 자막에 대한 점검 함수가 같은 모양이다. 제너릭 타입이 필요하다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isAvailable</span>&lt;<span style=color:#f92672>Formats</span>&gt;(<span style=color:#a6e22e>obj</span>: <span style=color:#66d9ef>Formats</span>, <span style=color:#a6e22e>key</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>symbol</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Formats</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>obj</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>이를 사용하는 과정은 `&lt; >` 안에 명시적으로 타입을 추가하는 것이다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isFormatAvailable</span>&lt;<span style=color:#f92672>VideoFormatURLs</span>&gt;(<span style=color:#a6e22e>videos</span>, <span style=color:#a6e22e>format</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div><p>우리가 자주 사용하는 Promise 객체도 제너릭 타입을 사용한다.
제너릭 타입은 선언 시점이 아닌, 사용 시점에 타입이 추론된다. 이를 제너릭 인퍼런스라고 할 수 있다.
이를 위해 타입을 인수로 받아서 사용하는데 이를 제너릭 어노테이션이라고 한다.</p></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>Lesson 30</h3><div id=outline-text-headline-3 class=outline-text-3><pre class=example>
제너릭 제약
</pre><p>이전 예제는 그럴듯 하지만 전달되는 인자에 대한 타입 제약이 없다. 이는 제너릭 타입이 기본적으로 `any` 를 바탕으로 제공되기 때문이고 따라서 아래와 같은 코드에서도 정상으로 타입 체크가 된다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isAvailable</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Stefan&#39;</span>, <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>38</span> }, <span style=color:#a6e22e>key</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// key is now “name” | “age”
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isAvailable</span>(<span style=color:#e6db74>&#39;A string&#39;</span>, <span style=color:#e6db74>&#39;length&#39;</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Also strings have methods,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// like length, indexOf, ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isAvailable</span>(<span style=color:#ae81ff>1337</span>, <span style=color:#a6e22e>aKey</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Also numbers have methods
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// aKey is now everything number has to offer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div><p>제너릭 어노테이션에 대한 경계를 추가해야 하는데 `extends` 키워드를 사용할 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isAvailable</span>&lt;<span style=color:#f92672>FormatList</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>object</span>&gt;(<span style=color:#a6e22e>obj</span>: <span style=color:#66d9ef>FormatList</span>, <span style=color:#a6e22e>key</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>FormatList</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>obj</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>이제 적어도 FormatList 는 object 타입으로 제약된다.
비디오를 로딩하는 함수를 하나 만들면 이전에 작성한 제너릭 타입을 사용하는 코드와 유사하게 작성될 것이다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadFile</span>&lt;<span style=color:#f92672>Formats</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>object</span>&gt;(<span style=color:#a6e22e>fileFormats</span>: <span style=color:#66d9ef>Formats</span>, <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// You know
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div><p>비디오 파일을 로드하기 위한 주요 타입은 URL 이고 이 정보를 동적으로 만들어내는 인덱스 타입을 사용해 제너릭 어노테이션을 확장할 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>URLList</span> <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>k</span>: <span style=color:#66d9ef>string</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>URL</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadFile</span>&lt;<span style=color:#f92672>Formats</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>URLList</span>&gt;(<span style=color:#a6e22e>fileFormats</span>: <span style=color:#66d9ef>Formats</span>, <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// The real work ahead
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div></div></div><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>Lesson 31</h3><div id=outline-text-headline-4 class=outline-text-3><pre class=example>
키 활용하기
</pre><p>문자열을 키로 사용하는 경우 오탈자나 정의되지 않은 키를 사용해 발생하는 런타임 에러를 막아보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadVideoFormat</span>(<span style=color:#a6e22e>fileFormats</span>: <span style=color:#66d9ef>VideoFormatURLs</span>, <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// You know
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div><p>`keyof` 를 통해 'format' 의 타입을 제약하는 방법이 있다. 아래는 제너릭 타입과 타입 제약을 적용한 것이다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>URLObject</span> <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>k</span>: <span style=color:#66d9ef>string</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>URL</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadFile</span>&lt;<span style=color:#f92672>Formats</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>URLObject</span>&gt;(<span style=color:#a6e22e>fileFormats</span>: <span style=color:#66d9ef>Formats</span>, <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Formats</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// The real work ahead
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>loadFile</span>(<span style=color:#a6e22e>video</span>, <span style=color:#e6db74>&#39;format1080p&#39;</span>) <span style=color:#75715e>// ok
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>loadFile</span>(<span style=color:#a6e22e>video</span>, <span style=color:#e6db74>&#39;format4k&#39;</span>) <span style=color:#75715e>// &#39;format4k&#39; is not available
</span></span></span></code></pre></div></div><p>제너릭 어노테이션은 하나 이상 작성할 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadFile</span>&lt;<span style=color:#f92672>Formats</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>URLObject</span>, <span style=color:#a6e22e>Key</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>keyof</span> <span style=color:#a6e22e>Formats</span>&gt;(<span style=color:#a6e22e>fileFormats</span>: <span style=color:#66d9ef>Formats</span>, <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>Key</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>fileFormats</span>[<span style=color:#a6e22e>format</span>].<span style=color:#a6e22e>href</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>format</span>, <span style=color:#a6e22e>loaded</span>: <span style=color:#66d9ef>data.response</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>200</span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>Promise 타입에 대한 부분도 제너릭으로 표현할 수 있다. loadFile 의 실제 구현에 await 가 필요하다면 이 함수의 반환 타입을 `Promise&lt;{ format: keyof Formats, loaded: boolean }>` 처럼 작성할 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>URLObject</span> <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>k</span>: <span style=color:#66d9ef>string</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>URL</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Loaded</span>&lt;<span style=color:#f92672>Key</span>&gt; <span style=color:#f92672>=</span> { <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>Key</span>, <span style=color:#a6e22e>loaded</span>: <span style=color:#66d9ef>boolean</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadFile</span>&lt;<span style=color:#f92672>Formats</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>URLObject</span>, <span style=color:#a6e22e>Key</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>keyof</span> <span style=color:#a6e22e>Formats</span>&gt;(<span style=color:#a6e22e>fileFormats</span>: <span style=color:#66d9ef>Formats</span>, <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>Key</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>Loaded</span>&lt;<span style=color:#f92672>Key</span>&gt;&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>fileFormats</span>[<span style=color:#a6e22e>format</span>].<span style=color:#a6e22e>href</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>format</span>, <span style=color:#a6e22e>loaded</span>: <span style=color:#66d9ef>data.response</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>200</span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>Lesson 32</h3><div id=outline-text-headline-5 class=outline-text-3><pre class=example>
제너릭 맵 타입
</pre><p>타입스크립트는 기본 타입을 확장해 사용할 수 있는 헬퍼 타입(유틸리티 타입)을 제공한다. 제너릭 맵 타입을 알아보기 위해 Record 와 Pick 을 살펴 본다.
Pick 은 첫 번째 인자의 타입에서 두 번째 인자를 선택한 타입을 만든다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>HD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Pick</span>&lt;<span style=color:#f92672>VideoFormatURLs</span>, <span style=color:#e6db74>&#39;format1080p&#39;</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#e6db74>&#39;format720p&#39;</span>&gt;</span></span></code></pre></div></div><p>Record 는 키와 타입으로 이루어진 맵이다. Record 는 쉽게 동적으로 object 타입에 대한 타입을 만들어 낸다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>URLObject</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>URL</span>&gt;</span></span></code></pre></div></div><p>맵 타입과 인덱스 타입을 활용하면 복잡한 타입을 단순하게 풀어낼 수 있다. 이어지는 예제를 보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;format360p&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;format480p&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;format720p&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;format1080p&#39;</span></span></span></code></pre></div></div><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>P</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>P</span> }
</span></span><span style=display:flex><span><span style=color:#75715e>// Equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>format360p</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format360p&#39;</span>, <span style=color:#a6e22e>format480p</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format480p&#39;</span>, <span style=color:#a6e22e>format720p</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format720p&#39;</span>, <span style=color:#a6e22e>format1080p</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format1080p&#39;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>P</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>P</span> }[<span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>// Equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;format360p&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;format480p&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;format720p&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;format1080p&#39;</span></span></span></code></pre></div></div><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>P</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>P</span>, <span style=color:#a6e22e>VideoFormatURLs</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>P</span><span style=color:#960050;background-color:#1e0010>]</span>&gt; }[<span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>// Equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Record</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>&#39;format360p&#39;</span>, <span style=color:#a6e22e>URL</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Record</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>&#39;format480p&#39;</span>, <span style=color:#a6e22e>URL</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Record</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>&#39;format720p&#39;</span>, <span style=color:#a6e22e>URL</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Record</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>&#39;format1080p&#39;</span>, <span style=color:#a6e22e>URL</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>format360p</span>: <span style=color:#66d9ef>URL</span> } <span style=color:#f92672>|</span> { <span style=color:#a6e22e>format480p</span>: <span style=color:#66d9ef>URL</span> } <span style=color:#f92672>|</span> { <span style=color:#a6e22e>format720p</span>: <span style=color:#66d9ef>URL</span> } <span style=color:#f92672>|</span> { <span style=color:#a6e22e>format1080p</span>: <span style=color:#66d9ef>URL</span> }</span></span></code></pre></div></div><p>마지막으로 잘 인덱스와 맵으로 정의된 제너릭 타입을 보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Split</span>&lt;<span style=color:#f92672>Obj</span>&gt; <span style=color:#f92672>=</span> { [<span style=color:#a6e22e>Prop</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Obj</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>Prop</span>, <span style=color:#a6e22e>Obj</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>P</span><span style=color:#960050;background-color:#1e0010>]</span>&gt; }[<span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Obj</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AvailableFormats</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Split</span>&lt;<span style=color:#f92672>VideoFormatURLs</span>&gt;</span></span></code></pre></div></div></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>Lesson 33</h3><div id=outline-text-headline-6 class=outline-text-3><pre class=example>
맵 타입 모디파이어
</pre><p>타입스크립트는 Pick 처럼 맵 타입을 수정해 사용할 수 있는 수정자를 제공한다.
이전 예제에서 사용할 사용자 속성을 아래 코드처럼 정의해 볼 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>UserPreferences</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>format</span>: <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>VideoFormatURLs</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>subtitles</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>active</span>: <span style=color:#66d9ef>boolean</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>language</span>: <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>SubtitleURLs</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;light&#39;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>새로 추가된 UserPreferences 을 사용하는 코드에서 기본 세팅과 사용자 정의 세팅을 제공해야 한다면 사용자 세팅을 override 해야 한다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>combinePreferences</span>(<span style=color:#a6e22e>defaultPerf</span>: <span style=color:#66d9ef>UserPreferences</span>, <span style=color:#a6e22e>userPerf</span>: <span style=color:#66d9ef>unknown</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { ...<span style=color:#a6e22e>defaultPerf</span>, ...<span style=color:#a6e22e>userPerf</span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>처음 정의한 UserPreferences 타입을 수정하지 않고 옵셔널 하게 정의할 수 있는 Optional&lt;T> 수정자를 만들어 보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Optional</span>&lt;<span style=color:#f92672>Obj</span>&gt; <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>Key</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Obj</span>]<span style=color:#f92672>?:</span> <span style=color:#a6e22e>Obj</span>[<span style=color:#a6e22e>Key</span>]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>combinePreferences</span>(<span style=color:#a6e22e>defaultPerf</span>: <span style=color:#66d9ef>UserPreferences</span>, <span style=color:#a6e22e>userPerf</span>: <span style=color:#66d9ef>Optional</span>&lt;<span style=color:#f92672>UserPreferences</span>&gt;) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { ...<span style=color:#a6e22e>defaultPerf</span>, ...<span style=color:#a6e22e>userPerf</span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>이 기능을 위한 Partial&lt;T> 수정자가 내장되어 있다. 상반된 목적의 Required&lt;T> 수정자도 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Required</span>&lt;<span style=color:#f92672>Obj</span>&gt; <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>Key</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Obj</span>]<span style=color:#f92672>-?:</span> <span style=color:#a6e22e>Obj</span>[<span style=color:#a6e22e>Key</span>]
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>읽기 전용으로 변경하는 Readonly&lt;T> 수정자는 아래 코드처럼 구현된다. 타입스크립트는 컴파일 타임에 이를 검사하기 때문에 런타임에 변경되는 것을 막기 위해서는 Object.freeze 를 사용해야 한다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Const</span>&lt;<span style=color:#f92672>Obj</span>&gt; <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>readonly</span> [<span style=color:#a6e22e>Key</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>Obj</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>Obj</span>[<span style=color:#a6e22e>Key</span>]
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>추가로 Readonly 나 Partial 수정자는 첫 단계의 프로퍼티에 대해 동작하는 것을 기억해야 한다. deep 하게 제약을 추가하기 위해 DeepReadyonly 같은게 필요할 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>DeepReadonly</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>readonly</span> [<span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>T</span>]<span style=color:#f92672>:</span> <span style=color:#a6e22e>DeepReadonly</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>key</span><span style=color:#960050;background-color:#1e0010>]</span>&gt;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>DeepPartial</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>key</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>keyof</span> <span style=color:#a6e22e>T</span>]<span style=color:#f92672>?:</span> <span style=color:#a6e22e>DeepPartial</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>key</span><span style=color:#960050;background-color:#1e0010>]</span>&gt;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div></div><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Lesson 34</h3><div id=outline-text-headline-7 class=outline-text-3><pre class=example>
고정 타입을 제너릭 타입으로 확장하기
</pre><p>이전에 combinePreferences 함수의 반환 타입을 만들어가며 제너릭을 확장하고 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>combinePreferences</span>(<span style=color:#a6e22e>defaultUserPref</span>, { <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format720p&#39;</span>, <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span> })
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSettings</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format720p&#39;</span>, <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span> }
</span></span><span style=display:flex><span><span style=color:#a6e22e>combinePreferences</span>(<span style=color:#a6e22e>defaultUserPref</span>, <span style=color:#a6e22e>userSettings</span>) <span style=color:#75715e>// type errors
</span></span></span></code></pre></div></div><p>이렇게 리터럴을 사용할 때랑 참조를 전달할 때 동작이 다르다. userSettings 가 만들어지는 시점을 보면 타입스크립트는 이 타입 UserPreferences 타입인지 확인하기 어렵다. format 이나 theme 가 변경 가능하기 때문에 가능하면 더 넓은 범위의 타입을 추론한다. `as const` 타입을 제약해 보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSettings</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format720p&#39;</span>, <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span> } <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>const</span></span></span></code></pre></div></div><p>이제 Partial&lt;UserPreferences> 타입을 만족한다. 다른 방법으로 userSettings 를 생성할 때 타입을 정의하여 타입 체크를 만족시킬 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSettings</span>: <span style=color:#66d9ef>Partial</span>&lt;<span style=color:#f92672>UserPreferences</span>&gt; <span style=color:#f92672>=</span> { <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;format720p&#39;</span>, <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dark&#39;</span> }</span></span></code></pre></div></div><p>모디파이어를 사용한 타입이라도 제너릭 기준에서 보면 고정 타입이다. 예제 함수의 매개변수 타입을 제너릭으로 개선해 보자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>combinePreferences</span>&lt;<span style=color:#f92672>UserSettings</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Partial</span>&lt;<span style=color:#f92672>UserPreferences</span>&gt;&gt; (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>defaultPref</span>: <span style=color:#66d9ef>UserPreferences</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>userPref</span>: <span style=color:#66d9ef>UserSettings</span>
</span></span><span style=display:flex><span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div><p>물론 defaultPerf 의 UserPreferences 도 제너릭하게 변경할 수 있다.</p></div></div><div id=outline-container-headline-8 class=outline-3><h3 id=headline-8>Lesson 35</h3><div id=outline-text-headline-8 class=outline-text-3><pre class=example>
제너릭 타입의 기본 타입을 정의하기
</pre><p>협업 상황에서 주의할 것은 사이드 이펙트를 유발하는 undefined, null 데이터들이다. Nullable 한 타입을 하나 가정하자.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Nullable</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>T</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span></span></span></code></pre></div></div><p>HTML 을 처리하기 위한 HTMLElement 타입의 Container 클래스를 만들 때에도 제너릭을 활용할 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Container</span>&lt;<span style=color:#f92672>CustomElement</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>HTMLElement</span>&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>element</span>: <span style=color:#66d9ef>Nullable</span>&lt;<span style=color:#f92672>CustomElement</span>&gt;;
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>set</span> <span style=color:#a6e22e>element</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>Nullable</span>&lt;<span style=color:#f92672>CustomElement</span>&gt;) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>element</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>get</span> <span style=color:#a6e22e>element</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Nullable</span>&lt;<span style=color:#f92672>CustomElement</span>&gt;  {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>element</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>container</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Container</span>(<span style=color:#a6e22e>userPrefs</span>)</span></span></code></pre></div></div><p>위 코드처럼 container 에 제너릭 타입 어노테이션을 작성하지 않고 생성할 때에도 VideoElement 를 위한 기본 타입을 가지도록 정의하기 위해 제너릭은 기본 값을 가질 수 있다.</p><div class="src src-typescript"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Container</span>&lt;<span style=color:#f92672>CustomElement</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>HTMLElement </span><span style=color:#f92672>=</span> <span style=color:#a6e22e>HTMLVideoElement</span>&gt;</span></span></code></pre></div></div><p>기본 타입이 정의된다면 조금 더 편리하게 코드를 작성할 수 있다.</p><p>제너릭스의 개념은 1970년대 Ada 프로그래밍 언어에서 처음 소개되었다. 타입스크립트의 제너릭 문법은 C++ 의 템플릿에서 물려 받았다. 그래서 기본 타입을 표기할 때 `T` 를 사용한다. 이어지는 타입으로 U,V,W 을 사용하고 프로퍼티로 P, 키로 K 등을 쓴다.</p></div></div></div></div></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>